(()=>{"use strict";var e={2392:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.API_ORIGIN=void 0,o.API_ORIGIN="https://serene-reef-96808.herokuapp.com"}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,t),i.exports}(()=>{const e=t(2392);let o;async function n(o,t){return await r(location.href.includes("staging")?`${e.API_ORIGIN}/matching/random/poll/staging`:`${e.API_ORIGIN}/matching/random/poll`,{session_token:o},t)}async function r(e,o,t){const n=await fetch(e,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"},keepalive:!0}).then((e=>e.json())).then(t).catch((e=>{console.error("Error:",e)}));if(console.log(n),!n)throw alert("network error!"),new Error("network error!");return n}!function t(){(async()=>{const i=await async function(o){return await r(location.href.includes("staging")?`${e.API_ORIGIN}/matching/friend/make_room/staging`:`${e.API_ORIGIN}/matching/friend/make_room`,{},(e=>e))}();o=i;const s=location.href.split("/");s[s.length-1]=`friend_join_room.html?room_id=${i.room_id}&room_key=${i.room_key}`,document.getElementById("url").value=s.join("/");let a=await n(i.session_token,(e=>e));for(;"Ok"!==a.type||"LetTheGameBegin"!==a.ret.type;){await new Promise((e=>setTimeout(e,200*(2+Math.random())*.8093)));const e=await n(i.session_token,(e=>e));if("Err"===e.type)return void t();a=e}var _,m,c;_=i.session_token,m=a.ret.is_first_move_my_move,c=a.ret.is_IA_down_for_me,sessionStorage.vs="someone",sessionStorage.session_token=_,sessionStorage.is_first_move_my_move=JSON.stringify(m),sessionStorage.is_IA_down_for_me=JSON.stringify(c),location.href="main.html"})()}()})()})();